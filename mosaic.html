<!DOCTYPE html>
<html>
<head>
  <script src='http://code.jquery.com/jquery-latest.min.js'></script>

  <script>

  var parts = []; //store split images (base64 url)
  var file,reader;
  //upload file
  function previewFile() {
    file = $('#fileinput')[0].files[0];
    reader = new FileReader();

    reader.onloadend = function () {
      $('#preview').prop('src',reader.result);
      colorSearch();
    }

    if (file) {
      reader.readAsDataURL(file);
    } else {
      $('#preview').prop('src', '');
    }


  }
  function colorSearch() {
    var save = 'data:image/png;base64,'+reader.result;

    //find colors of an image slice
    $.getJSON("http://cooper-union-imagga-proxy.herokuapp.com/color?image="+save, function(response){
        console.log(response);
        //$('img').prop('src',response.results[0].image);
      });
  }

  $(document).ready(function(){
    // $('body').append('<img src='' alt='split images'/>');




      });

  </script>
</head>

<body>
  <input type='file' id ='fileinput' onchange='previewFile()'><br>
  <img src='' id='preview' alt='Image preview...'/>
  <img src='' alt='split images'/>
</body>
</html>
